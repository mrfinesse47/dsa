let iterations = 0;

function quickSort(arr) {
  const obj = pivotHelper(arr);
  return Object.values(obj);
}

function pivotHelper(arr, startIndex = 0) {
  let resObj = {};
  if (arr.length === 1) {
    resObj[startIndex] = arr[0];
    return resObj;
  }

  const lhs = [];
  const rhs = [];

  let howManyLess = 0;
  arr.forEach((el) => {
    iterations++;
    if (arr[0] > el) {
      howManyLess++;
      lhs.push(el);
    } else if (arr[0] < el) {
      rhs.push(el);
    } //cant handle equal
  });
  resObj[howManyLess + startIndex] = arr[0];

  if (lhs.length > 0) {
    resObj = { ...resObj, ...pivotHelper(lhs, startIndex) };
  }
  if (rhs.length > 0) {
    resObj = { ...resObj, ...pivotHelper(rhs, howManyLess + startIndex + 1) };
  }

  return resObj;
}

const arr = [9, 2, 5, 11, 23, 43];

const arr2 = [
  58172, 8210, 89522, 98305, 59622, 9627, 41215, 20778, 75090, 62047, 42746,
  22235, 97952, 95113, 71974, 21169, 98590, 33961, 61183, 41854, 96089, 28007,
  62569, 93363, 89333, 53734, 35164, 44507, 67763, 19669, 32391, 46532, 83316,
  84444, 53665, 10185, 57576, 26777, 21516, 62780, 75399, 37617, 52641, 2186,
  85789, 75574, 21509, 91360, 60362, 82283, 83378, 48126, 34379, 92900, 19682,
  57129, 43257, 94464, 11017, 87263, 67858, 40908, 44737, 50567, 35431, 90487,
  68462, 25946, 10253, 16275, 96962, 25363, 47242, 97512, 35267, 49852, 52234,
  71820, 15943, 42132, 19596, 98885, 23365, 96273, 23646, 98412, 6812, 40038,
  92346, 15957, 81140, 13480, 60840, 10172, 85018, 85908, 55744, 68682, 46489,
  87348, 68060, 50465, 27142, 7485, 53056, 75819, 93177, 49002, 94681, 74247,
  67028, 2117, 89341, 42034, 27146, 37439, 82787, 29673, 11959, 89193, 63714,
  26679, 49014, 99570, 36857, 7563, 42437, 5893, 81659, 97040, 30588, 89880,
  95290, 51532, 93044, 89617, 83958, 53951, 10212, 26978, 11867, 77922, 15485,
  15830, 15218, 46745, 34313, 7341, 38121, 36045, 39583, 7048, 5915, 20856,
  9424, 26102, 55440, 62852, 6423, 48903, 56701, 66720, 57994, 78184, 25285,
  89856, 91309, 24235, 77741, 45612, 59348, 75498, 19550, 91540, 77742, 97579,
  41894, 43988, 47714, 28437, 14319, 21137, 73657, 22331, 40560, 27232, 20052,
  85061, 4155, 39843, 24644, 58537, 48308, 47505, 57528, 36338, 41041, 96526,
  56162, 96017, 17337, 27226, 1703, 90580, 39640, 12331, 3686, 14940, 59232,
  15233, 77068, 28914, 58938, 97847, 66494, 88993, 51335, 40974, 36186, 54954,
  56587, 7425, 59247, 94993, 33914, 2925, 36676, 48860, 21830, 77076, 83062,
  35713, 372, 38129, 73088, 78147, 2086, 47692, 13864, 14868, 35832, 22909,
  6901, 6407, 69282, 82312, 11341, 3336, 75166, 41201, 11929, 6240, 88098,
  46442, 89562, 35197, 80823, 42916, 33567, 33990, 1773, 51625, 36032, 11544,
  55518, 61440, 10226, 35938, 59964, 32869, 24232, 45601, 10612, 16928, 65417,
  19112, 5351, 55185, 37376, 77629, 70433, 51226, 57411, 53088, 1457, 7581,
  53894, 32106, 87976, 42517, 66973, 34469, 90118, 31183, 7227, 406, 62310,
  59376, 60848, 7763, 75135, 43245, 19124, 54753, 95799, 1526, 1066, 99134,
  65130, 5080, 31596, 25310, 10939, 2002, 72349, 80213, 25266, 607, 27333,
  28032, 48075, 62753, 3681, 97825, 82204, 4729, 97545, 30866, 72746, 20883,
  84897, 93900, 28017, 49058, 88827, 85384, 66073, 82329, 65701, 45175, 72478,
  83425, 61803, 94237, 71287, 83538, 27882, 98469, 7269, 45872, 15279, 74761,
  72667, 29515, 92798, 48250, 71846, 34609, 41196, 34991, 44123, 1985, 46507,
  53921, 49440, 45534, 31287, 42235, 57326, 88701, 74157, 57076, 41158, 44164,
  54432, 86404, 31694, 68449, 19884, 79503, 90298, 95518, 59844, 77577, 90929,
  62449, 57639, 68773, 47460, 1415, 5484, 24184, 43026, 1179, 34595, 65057,
  49591, 51878, 30068, 65763, 82985, 51015, 76494, 34753, 27259, 58078, 51962,
  20201, 98461, 80996, 54675, 98079, 29768, 36419, 15624, 71534, 26707, 8367,
  35992, 36337, 72523, 39299, 38375, 28809, 81165, 64345, 24370, 7225, 84317,
  29498, 30806, 68234, 53117, 44637, 21650, 35188, 13829, 89335, 12516, 27718,
  16912, 52252, 26667, 55500, 94543, 16155, 17948, 97855, 79733, 71150, 60108,
  75169, 68829, 86685, 97710, 36769, 71062, 2125, 32716, 65316, 47859, 86960,
  15130, 14358, 70795, 55017, 1664, 93836, 63540, 34885, 20642, 57315, 20331,
  12151, 35107, 55557, 20207, 65586, 87582, 2383, 26189, 3228, 50474, 96803,
  17698, 31863, 56965, 73493, 59780, 69894, 54386, 60641, 16477, 83018, 77042,
  33988, 20523, 4956, 17783, 14420, 959, 31901, 26628, 67827, 8863, 40315,
  64188, 77393, 60967, 98792, 2214, 35687, 54255, 42565, 56331, 34444, 34300,
  93867, 66982, 29565, 82967, 15799, 64853, 46085, 83309, 13126, 71402, 24354,
  60805, 36402, 74931, 57991, 98424, 1764, 49184, 11461, 43306, 62047, 49946,
  18451, 48944, 34182, 40941, 11293, 10861, 39562, 67892, 62830, 43747, 74027,
  21241, 35557, 18402, 32141, 93213, 57259, 67238, 69569, 52822, 59735, 1980,
  37188, 69514, 62983, 92596, 33296, 62432, 23444, 84863, 6847, 43412, 82517,
  8453, 42348, 46197, 88950, 27611, 59715, 34748, 61923, 62707, 13231, 48368,
  80448, 23144, 75880, 88299, 26833, 49710, 51519, 39412, 68554, 2194, 29048,
  179, 63735, 73415, 91855, 64635, 85573, 49123, 51691, 50450, 27109, 47105,
  5416, 883, 83793, 28806, 56905, 79783, 84512, 53287, 84364, 46139, 19780,
  61718, 2919, 47094, 37464, 98502, 93787, 69226, 52576, 25071, 73960, 5252,
  87886, 12323, 42795, 17662, 1777, 96936, 76779, 49163, 83372, 22976, 3162,
  12243, 51595, 14623, 22755, 70484, 3628, 56984, 30042, 71284, 95415, 86914,
  42371, 60264, 31418, 88152, 49563, 50966, 4154, 84995, 21872, 14666, 23264,
  15927, 91874, 45564, 68325, 20763, 392, 86373, 46469, 39747, 28571, 21904,
  54805, 2835, 74451, 253, 55109, 55753, 84987, 20212, 92677, 42534, 2049,
  46495, 36935, 71457, 51171, 17561, 13779, 74687, 58858, 66439, 95059, 61562,
  40023, 27840, 18647, 42972, 60808, 15010, 17924, 36932, 41661, 46407, 56741,
  74313, 87859, 45299, 45267, 42857, 94640, 19631, 30355, 29537, 49736, 18986,
  56901, 71362, 41560, 63938, 39341, 23235, 35170, 89805, 78030, 99540, 61812,
  52235, 88694, 96192, 22360, 51956, 34177, 78712, 38706, 42756, 54072, 34737,
  3757, 38664, 59943, 30362, 56445, 73953, 59338, 86134, 57388, 9923, 35942,
  49132, 30515, 10700, 67131, 20614, 16267, 86416, 42031, 81895, 52213, 38939,
  75437, 42584, 32192, 18257, 29257, 92565, 34323, 82306, 67184, 90933, 35481,
  68349, 96985, 11853, 40988, 39468, 38400, 43040, 67334, 17441, 68296, 722,
  23295, 30272, 2655, 30959, 4630, 25104, 46940, 53562, 24861, 11786, 77437,
  87017, 43369, 53186, 95708, 33486, 9927, 54664, 288, 22857, 75399, 57988,
  39701, 17533, 63824, 71271, 12926, 87335, 43045, 33649, 9839, 71624, 47096,
  432, 74615, 40557, 79483, 88743, 22717, 72044, 33153, 85807, 6867, 14706,
  58882, 38262, 30226, 10, 72751, 95750, 40090, 19588, 43634, 25050, 84936, 752,
  90911, 24819, 94639, 45189, 4071, 90471, 16065, 45787, 70593, 36753, 55627,
  74314, 8190, 62457, 89804, 20214, 41202, 27706, 56074, 30527, 30893, 55446,
  39862, 32715, 43017, 8487, 73015, 33466, 87793, 92753, 82901, 63256, 85952,
  9725, 37362, 85622, 30617, 59562, 50619, 44007, 20302, 37153, 57702, 54331,
  59979, 36140, 45972, 20365, 90821, 27833, 37640, 22717, 67102, 95429, 97010,
  3208, 84215, 55128, 4728, 21899, 68889, 17597, 88468, 27534, 90518, 88156,
  30060, 42576, 66634, 70086, 5811, 96269, 5750, 89415, 74553, 79277, 90390,
  2150, 87141, 72409, 83418, 56222, 63266, 95343, 40269, 22561, 27203, 56211,
  69354, 70894, 46574, 40145, 30577, 1211, 24433, 60905, 43434, 74719, 46169,
  5216, 11883, 21846, 50680, 34508, 29622, 77854, 29868, 9932, 50160, 96585,
  61685, 17333, 93923, 76189, 91533, 45693, 67798, 49052, 4316, 89292, 16187,
  94346, 84065, 37202, 23850, 64383, 48190, 98949, 87953, 32373, 22558, 9272,
  98354, 62123, 91354, 54799, 19164, 5025, 89823, 29571, 45767, 32170, 21020,
  23133, 45207, 6872, 25536, 6934, 61268, 98453, 34271, 60730, 89715, 23404,
  96426, 24272, 39017, 35729, 45932, 76367, 27392, 96109, 79275,
];

console.log(quickSort(arr));
console.log(iterations);
